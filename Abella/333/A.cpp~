
void solve(vector<int> &h) {
  int n = h.size();

  vector<pair<int, int> > vi;
  for (int i = 0; i < n; ++i)
    vi.push_back(make_pair(h[i], i));
  sort(vi.rbegin(), vi.rend());

  long long ret = 0;
  
  set<int> poset;
  poset.insert(-1);
  poset.insert(n);
  for (int i = 0; i < n; ++i) {
    int v = vi[i].first, pos = vi[i].second;
    set<int>::iterator it = poset.insert(pos).first;
    set<int>::iterator it2 = it, it3 = it;
    --it2, ++it3;

    int toleft = *it2 + 1;
    int toright = *it3 - 1;
    ret += (toright - pos + 1) * (pos - toleft + 1);
  }
  
  return 0;
}
